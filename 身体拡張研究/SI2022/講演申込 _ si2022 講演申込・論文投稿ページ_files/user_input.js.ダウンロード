$(function () {
  //著者の入力エリアを非表示にする
  $('#author_table tr').each(function (index) {
    if (index <= 1) {
      return;
    }
    var hit = 0;
    $(this).find('input').each(function(){
      if( !$(this).val() ){
        hit++;
      }
    });
    if (hit > 4) {
      $(this).closest('tr').hide();
    }
  });
  checkAuthorMaxNum();
  //著者の入力エリアを増やす
  $('#add_author').on('click', function () {

    $('#author_table tr:not(:visible)').first().show();
    checkAuthorMaxNum();
  });
  
  function checkAuthorMaxNum(){
    if ($('#author_table tr:visible').size() > 20) {
      $('#add_author').hide();
    }
  }
});
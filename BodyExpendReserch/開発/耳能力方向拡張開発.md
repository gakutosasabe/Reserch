# Todo
- まずは手段によらないシステム図に落とす
- 音源分離やビームフォーミングの要素技術について，本を使って実装しながら学ぶ
- ラズパイ＋Respeakerで実装

# 音声分離・ビームフォーミング勉強
## 複数pythonのver変更
- 今回はpython3.9でやりたいが私のPCにはpython3.9と3.11が入っている
- pipでなんかインストールするときも下記のように実行時もバージョン指定がいるらしい
  - py -2.7 -m pip freeze
- py --list-pathsで現在インストールされているpythonのリストが見れる
- https://qiita.com/landwarrior/items/1b5e0f9af5316a025fe0

## 環境構築
- python 3.9
- 各ライブラリを下記コマンドでpipから落とす
  - py -3.9 -m pip install numpy
  - py pip install scipy
  - py -3.9 -m pip install matplotlib
  - py -3.9 -m pip install sounddevice
  - py -3.9 -m pip install pyroomacoustics
  - py -3.9 -m pip install nara-wpe

## pythonの行列
- http://www.me.cit.nihon-u.ac.jp/lab/yanagisawa/for_student/robobe2_1.html
- 行列の表記
  - ２行４列の行列（２×４行列）の作成方法は以下です。arrayに対して１行目「11,12,13,14」２行目「21,22,23,24」の値を渡します。
```python
arr3 = np.array([[11,12,13,14],[21,22,23,24]])
```
- アインシュタインの縮約記法
  - https://www.youtube.com/watch?v=IsN5VdW9UxM

- reshape関数の説明

  - https://deepage.net/features/numpy-reshape.html
- 3次元行列のイメージ
  - https://qiita.com/ken_yoshi/items/4cbe3abb7d46c5252fdd

# pyroomacoustics
- しつないで収録したインパルス応答（室内伝達関数）のシミュレーションを行うライブラリ
  - 音源とマイクロホンの位置関係を自由に変化させて，作り出す音のバリエーションを増やせる
  - 室内伝達関数のシミュレーションには，鏡像法という方法で音の反射をシミュレートする
    - 音の入射角と反射角が等しくなることを利用して仮想のへやを作り，音の反射を模擬する
  - pyroomacousticsを用いて室内伝達関数のシミュレーションとインパルス応答の畳み込みを行うコードは以下
```python
import wave as wave
import pyroomacoustics as pa
import numpy as np

#ラン数の種を初期化
np.random.seed(0)


#畳み込みに用いる音声波形
clean_wave_files=["./CMU_ARCTIC/cmu_us_aew_arctic/wav/arctic_a0002.wav","./CMU_ARCTIC/cmu_us_axb_arctic/wav/arctic_a0002.wav"

#音源数
n_sources=len(clean_wave_files)

#長さを調べる
n_samples=0

#ファイルを読みこむ
for clean_wave_file in clean_wave_files:
  wav = wave.open(clean_wave_file)
  if n_samples<wav.getnsrames():
    n_samples=wav.getnframes() #サンプル数
  wav.close()



```

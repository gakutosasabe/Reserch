//ＳＩＣＥ学術奨励賞審査
$('#PostAward1').prop('disabled', true);
$("input[name='data[Author][presenter]']").on('click',function(){
    $('#PostAward1').prop('disabled', false);
});
$('#PostAward1').on('click',function(){

    $("input[name='data[Author][presenter]']").each(function(){

        if($(this).prop('checked') == true){
            var award_check = $("input[name='data[Author][presenter]']:checked").val() - 1;
            var award_name_sei = $(`input[name='data[Author][${award_check}][name1]']`).val();
            var award_name_mei = $(`input[name='data[Author][${award_check}][name2]']`).val();
            if(award_name_sei.length !== 0 && award_name_mei.length !== 0){
                if(award_check == undefined){
                    alert('４．著者　の　発表者にチェックを入れてください。');
                }else{

                    $('.sice_data_name_sei').empty();
                    $('.sice_data_name_mei').empty();
                    $('#sice_data_name_sei').val('');
                    $('#sice_data_name_mei').val('');
                //   $('.data_birth').empty();
                console.log(award_name_mei);
                    $('.sice_data_name_sei').html(award_name_sei);
                    $('.sice_data_name_mei').html(award_name_mei);
                    $('.form_si_table_wrp').toggle();
                    $('.sice_data_name_wrp').toggle();
                    // $('.data_name_sei').toggle();
                    // $('.data_name_mei').toggle();
                    $('.sice_data_birth').toggle();
                    $('#sice_data_name_sei').val(award_name_sei);
                    $('#sice_data_name_mei').val(award_name_mei);
                }
            }else{
            alert('４．著者　の　発表者の名前（漢字　姓・名）を入力してください。');
            $('#PostAward1').prop('checked', false);
            }

        }
    });

});
$(window).on('load',function(){
    if($("input[name='data[Post][award3]']:checked").val() == undefined){
        $("input[name='data[Post][award3]']:eq(0)").prop('checked', true);
    }
    if($('#PostAward1').prop('checked') == true){
        $('.form_si_table_wrp').toggle();
        $('.sice_data_name_wrp').toggle();
        $('.sice_data_birth').toggle();
    }
    $("input[name='data[Author][presenter]']").each(function(){

        if($(this).prop('checked') == true){
            $('#PostAward1').prop('disabled', false);
            // $('#PostAward1').prop('checked', true);
            var award_check = $("input[name='data[Author][presenter]']:checked").val() - 1;
            var award_name_sei = $(`input[name='data[Author][${award_check}][name1]']`).val();
            var award_name_mei = $(`input[name='data[Author][${award_check}][name2]']`).val();
            if(award_name_sei.length !== 0 && award_name_mei.length !== 0){
                if(award_check == undefined){
                    alert('４．著者　の　発表者にチェックを入れてください。');
                }else{

                    $('.sice_data_name_sei').empty();
                    $('.sice_data_name_mei').empty();
                    $('#sice_data_name_sei').val('');
                    $('#sice_data_name_mei').val('');
                    $('.sice_data_name_sei').html(award_name_sei);
                    $('.sice_data_name_mei').html(award_name_mei);
                    // $('.sice_data_name_wrp').toggle();
                    // $('.sice_data_birth').toggle();
                    // $('.form_si_table_wrp').toggle();
                    $('#sice_data_name_sei').val(award_name_sei);
                    $('#sice_data_name_mei').val(award_name_mei);
                }
            }else{
            alert('４．著者　の　発表者の名前（漢字　姓・名）を入力してください。');
            $('#PostAward1').prop('checked', false);
            }

        }
    });
    // if($('#sice_award_birth').val() == ""){
    //     $('#PostAward1').prop('checked', false);
    //     $('.sice_data_name_wrp').hide();
    //     $('.sice_data_birth').hide();
    //     $('.form_si_table_wrp').hide();
    // }
});
        $("input[name='data[Author][presenter]']").on('click',function(){
            $('.sice_data_name_sei').empty();
            $('.sice_data_name_mei').empty();
            $('#sice_data_name_sei').val('');
            $('#sice_data_name_mei').val('');
            $('#PostAward1').prop('checked', false);
            $('.sice_data_name_wrp').hide();
            $('.sice_data_birth').hide();
        });
        var birth_check = false;
        var data_year = 0;
        var data_month = 0;
        var data_date  = 0;
        $('.sice_data_birth').find('select').change(function(){
          data_year = $('#sice_data_year').val();
          data_month = $('#sice_data_month').val();
          data_date  = $('#sice_data_date').val();
          if($('#sice_award_birth').length !== 0){
              if(data_year !== '0' && data_month !== '0' && data_date !== '0'){
                $('#sice_award_birth').val(data_year + data_month + data_date);
              }else{
                $('#sice_award_birth').val("");
              }

          }
        });
        $('.bt01Out').on('click',function(){
            $('#form1').submit();
            return false;
        });


        $(function() {
            // 現在の年月日を取得
            var time = new Date();
            var year = time.getFullYear();
            var month = time.getMonth() + 1;
            var date = time.getDate();

            // 選択された年月日を取得
            var selected_year = document.getElementById("sice_data_year").value;
            var selected_month = document.getElementById("sice_data_month").value;

            // 年(初期): 1900〜現在の年 の値を設定
            for (var i = year - 10; i >= 1986 ; i--) {
                $('#sice_data_year').append('<option value="' + i + '">' + i + '</option>');
            }

            // 月(初期): 1~12 の値を設定
            for (var j = 1; j <= 12; j++) {
                $('#sice_data_month').append('<option value="' + ("0"+ j).slice(-2) + '">' + ("0"+j).slice(-2) + '</option>');
            }

            // 日(初期): 1~31 の値を設定
            for (var k = 1; k <= 31; k++) {
                $('#sice_data_date').append('<option value="' + ("0"+ k).slice(-2) + '">' + ("0"+ k).slice(-2) + '</option>');
            }
            var now_month = 0;
            var now_date = 0;
            $('#sice_data_year,#sice_data_month').change(function() {
                now_month = $('#sice_data_month').val();
                now_date = $('#sice_data_date').val();
            });
            // 月(変更)：選択された年に合わせて、適した月の値を選択肢にセットする
            $('#sice_data_year').change(function() {
                selected_year = $('#sice_data_year').val();

                // 現在の年が選択された場合、月の選択肢は 1~現在の月 に設定
                // それ以外の場合、1~12 に設定
                var last_month = 12;
                if (selected_year == year) {
                    last_month = month;
                }
                $('#sice_data_month').children('option').remove();
                $('#sice_data_month').append('<option value="' + 0 + '">--</option>');
                for (var n = 1; n <= last_month; n++) {
                    $('#sice_data_month').append('<option value="' + ("0"+ n).slice(-2) + '">' + ("0"+ n).slice(-2) + '</option>');
                }

            });

            // 日(変更)：選択された年・月に合わせて、適した日の値を選択肢にセットする
            $('#sice_data_year,#sice_data_month').change(function() {
                selected_year = $('#sice_data_year').val();
                selected_month = $('#sice_data_month').val();

                // 現在の年・月が選択された場合、日の選択肢は 1~現在の日付 に設定
                // それ以外の場合、各月ごとの最終日を判定し、1~最終日 に設定
                if (selected_year == year && selected_month == month ) {
                    var last_date = date;
                }else{
                    // 2月：日の選択肢は1~28日に設定
                    // ※ ただし、閏年の場合は29日に設定
                    if (selected_month == 2) {
                        if((Math.floor(selected_year%4 == 0)) && (Math.floor(selected_year%100 != 0)) || (Math.floor(selected_year%400 == 0))){
                            last_date = 29;
                        }else{
                            last_date = 28;
                        }

                    // 4, 6, 9, 11月：日の選択肢は1~30日に設定
                    }else if(selected_month == 4 || selected_month == 6 || selected_month == 9 || selected_month == 11 ){
                        last_date = 30;

                    // 1, 3, 5, 7, 8, 10, 12月：日の選択肢は1~31日に設定
                    }else{
                        last_date = 31;
                    }
                }

                $('#sice_data_date').children('option').remove();
                $('#sice_data_date').append('<option value="' + 0 + '">--</option>');
                for (var m = 1; m <= last_date; m++) {
                    $('#sice_data_date').append('<option value="' + ("0"+ m).slice(-2) + '">' + ("0"+ m).slice(-2) + '</option>');
                }

            });
            $('#sice_data_year,#sice_data_month').change(function() {
                if(now_month != 0){
                    $("#sice_data_month").val(now_month);
                }
                if(now_date != 0){
                    $("#sice_data_date").val(now_date);
                }
            });
        });

        $(window).on('load',function(){
            if($('#sice_award_birth').val().length !== 0){
                var new_birth = $('#sice_award_birth').val();
                var new_birth_year = new_birth.substr(0,4);
                var new_birth_month = new_birth.substr(4,2);
                var new_birth_day = new_birth.substr(6,2);

                $('#sice_data_year').val(new_birth_year);
                $('#sice_data_month').val(new_birth_month);
                $('#sice_data_date').val(new_birth_day);

                data_year = $('#sice_data_year').val();
                data_month = $('#sice_data_month').val();
                data_date  = $('#sice_data_date').val();

                $('#sice_award_birth').val(data_year + data_month + data_date);
            }else{
                $('#sice_data_year').val("");
                $('#sice_data_month').val("");
                $('#sice_data_date').val("");
            }
        });


//ＳＩ部門賞（部門若手奨励賞）審査
$('#PostAward2').prop('disabled', true);
$("input[name='data[Author][presenter]']").on('click',function(){
    $('#PostAward2').prop('disabled', false);
});
$('#PostAward2').on('click',function(){

    $("input[name='data[Author][presenter]']").each(function(){

        if($(this).prop('checked') == true){
            var award_check = $("input[name='data[Author][presenter]']:checked").val() - 1;
            var award_name_sei = $(`input[name='data[Author][${award_check}][name1]']`).val();
            var award_name_mei = $(`input[name='data[Author][${award_check}][name2]']`).val();
            if(award_name_sei.length !== 0 && award_name_mei.length !== 0){
                if(award_check == undefined){
                    alert('４．著者　の　発表者にチェックを入れてください。');
                }else{

                    $('.data_name_sei').empty();
                    $('.data_name_mei').empty();
                    $('#data_name_sei').val('');
                    $('#data_name_mei').val('');
                //   $('.data_birth').empty();
                    $('.data_name_sei').html(award_name_sei);
                    $('.data_name_mei').html(award_name_mei);
                    $('.data_name_wrp').toggle();
                    // $('.data_name_sei').toggle();
                    // $('.data_name_mei').toggle();
                    $('.data_birth').toggle();
                    $('#data_name_sei').val(award_name_sei);
                    $('#data_name_mei').val(award_name_mei);
                }
            }else{
            alert('４．著者　の　発表者の名前（漢字　姓・名）を入力してください。');
            $('#PostAward2').prop('checked', false);
            }

        }
    });

});
$(window).on('load',function(){
    if($('#PostAward2').prop('checked') == true){
        $('.data_name_wrp').toggle();
        $('.data_birth').toggle();
    }
    $("input[name='data[Author][presenter]']").each(function(){

        if($(this).prop('checked') == true){
            $('#PostAward2').prop('disabled', false);
            // $('#PostAward2').prop('checked', true);
            var award_check = $("input[name='data[Author][presenter]']:checked").val() - 1;
            console.log(award_check);
            var award_name_sei = $(`input[name='data[Author][${award_check}][name1]']`).val();
            var award_name_mei = $(`input[name='data[Author][${award_check}][name2]']`).val();
            if(award_name_sei.length !== 0 && award_name_mei.length !== 0){
                if(award_check == undefined){
                    alert('４．著者　の　発表者にチェックを入れてください。');
                }else{

                    $('.data_name_sei').empty();
                    $('.data_name_mei').empty();
                    $('#data_name_sei').val('');
                    $('#data_name_mei').val('');
                //   $('.data_birth').empty();
                    $('.data_name_sei').html(award_name_sei);
                    $('.data_name_mei').html(award_name_mei);
                    // $('.data_name_wrp').toggle();
                    // // $('.data_name_sei').toggle();
                    // // $('.data_name_mei').toggle();
                    // $('.data_birth').toggle();
                    $('#data_name_sei').val(award_name_sei);
                    $('#data_name_mei').val(award_name_mei);
                }
            }else{
            alert('４．著者　の　発表者の名前（漢字　姓・名）を入力してください。');
            $('#PostAward2').prop('checked', false);
            }

        }
    });
    // if($('#award_birth').val() == ""){
    //     $('#PostAward2').prop('checked', false);
    //     $('.data_name_wrp').hide();
    //     $('.data_birth').hide();
    // }
});
        $("input[name='data[Author][presenter]']").on('click',function(){
            $('.data_name_sei').empty();
            $('.data_name_mei').empty();
            $('#data_name_sei').val('');
            $('#data_name_mei').val('');
            $('#PostAward2').prop('checked', false);
            $('.data_name_wrp').hide();
            $('.data_birth').hide();
        });
        var birth_check = false;
        var data_year = 0;
        var data_month = 0;
        var data_date  = 0;
        $('.data_birth').find('select').change(function(){
          data_year = $('#data_year').val();
          data_month = $('#data_month').val();
          data_date  = $('#data_date').val();
          if($('#award_birth').length !== 0){
              if(data_year !== '0' && data_month !== '0' && data_date !== '0'){
                $('#award_birth').val(data_year + data_month + data_date);
              }else{
                $('#award_birth').val("");
              }

          }
        });


        $(function() {
            // 現在の年月日を取得
            var time = new Date();
            var year = time.getFullYear();
            var month = time.getMonth() + 1;
            var date = time.getDate();

            // 選択された年月日を取得
            var selected_year = document.getElementById("data_year").value;
            var selected_month = document.getElementById("data_month").value;

            // 年(初期): 1900〜現在の年 の値を設定
            for (var i = year - 10; i >= 1986 ; i--) {
                $('#data_year').append('<option value="' + i + '">' + i + '</option>');
            }

            // 月(初期): 1~12 の値を設定
            for (var j = 1; j <= 12; j++) {
                $('#data_month').append('<option value="' + ("0"+ j).slice(-2) + '">' + ("0"+j).slice(-2) + '</option>');
            }

            // 日(初期): 1~31 の値を設定
            for (var k = 1; k <= 31; k++) {
                $('#data_date').append('<option value="' + ("0"+ k).slice(-2) + '">' + ("0"+ k).slice(-2) + '</option>');
            }
            var now_month = 0;
            var now_date = 0;
            $('#data_year,#data_month').change(function() {
                now_month = $('#data_month').val();
                now_date = $('#data_date').val();
            });
            // 月(変更)：選択された年に合わせて、適した月の値を選択肢にセットする
            $('#data_year').change(function() {
                selected_year = $('#data_year').val();

                // 現在の年が選択された場合、月の選択肢は 1~現在の月 に設定
                // それ以外の場合、1~12 に設定
                var last_month = 12;
                if (selected_year == year) {
                    last_month = month;
                }
                $('#data_month').children('option').remove();
                $('#data_month').append('<option value="' + 0 + '">--</option>');
                for (var n = 1; n <= last_month; n++) {
                    $('#data_month').append('<option value="' + ("0"+ n).slice(-2) + '">' + ("0"+ n).slice(-2) + '</option>');
                }

            });

            // 日(変更)：選択された年・月に合わせて、適した日の値を選択肢にセットする
            $('#data_year,#data_month').change(function() {
                selected_year = $('#data_year').val();
                selected_month = $('#data_month').val();

                // 現在の年・月が選択された場合、日の選択肢は 1~現在の日付 に設定
                // それ以外の場合、各月ごとの最終日を判定し、1~最終日 に設定
                if (selected_year == year && selected_month == month ) {
                    var last_date = date;
                }else{
                    // 2月：日の選択肢は1~28日に設定
                    // ※ ただし、閏年の場合は29日に設定
                    if (selected_month == 2) {
                        if((Math.floor(selected_year%4 == 0)) && (Math.floor(selected_year%100 != 0)) || (Math.floor(selected_year%400 == 0))){
                            last_date = 29;
                        }else{
                            last_date = 28;
                        }

                    // 4, 6, 9, 11月：日の選択肢は1~30日に設定
                    }else if(selected_month == 4 || selected_month == 6 || selected_month == 9 || selected_month == 11 ){
                        last_date = 30;

                    // 1, 3, 5, 7, 8, 10, 12月：日の選択肢は1~31日に設定
                    }else{
                        last_date = 31;
                    }
                }

                $('#data_date').children('option').remove();
                $('#data_date').append('<option value="' + 0 + '">--</option>');
                for (var m = 1; m <= last_date; m++) {
                    $('#data_date').append('<option value="' + ("0"+ m).slice(-2) + '">' + ("0"+ m).slice(-2) + '</option>');
                }

            });
            $('#data_year,#data_month').change(function() {
                if(now_month != 0){
                    $("#data_month").val(now_month);
                }
                if(now_date != 0){
                    $("#data_date").val(now_date);
                }
            });
        });

        $(window).on('load',function(){
            if($('#award_birth').val().length !== 0){
                var new_birth = $('#award_birth').val();
                var new_birth_year = new_birth.substr(0,4);
                var new_birth_month = new_birth.substr(4,2);
                var new_birth_day = new_birth.substr(6,2);

                $('#data_year').val(new_birth_year);
                $('#data_month').val(new_birth_month);
                $('#data_date').val(new_birth_day);

                data_year = $('#data_year').val();
                data_month = $('#data_month').val();
                data_date  = $('#data_date').val();

                $('#award_birth').val(data_year + data_month + data_date);
            }else{
                $('#data_year').val("");
                $('#data_month').val("");
                $('#data_date').val("");
            }
        });



$('#PostSocietyName').change(function(){
    $('#PostSiceId').val('-');
    var val = $(this).val();
    if(val == 'SICE'){
        $('#PostSiceId').val('');
        $('.sice_id_wrp').show();
    }else{
        $('.sice_id_wrp').hide();
        $('#PostSiceId').val('-');
    }
});
$(window).on('load',function(){
    var val = $('#PostSocietyName').val();
    if(val == 'SICE'){
        // $('#PostSiceId').val('');
        $('.sice_id_wrp').show();
    }else{
        $('.sice_id_wrp').hide();
        $('#PostSiceId').val('-');
    }
});
